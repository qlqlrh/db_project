<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Page</title>
    <script>
        // Edit mode toggle
        function enableEdit() {
            document.getElementById("userForm").querySelectorAll("input").forEach(input => input.readOnly = false);
            document.getElementById("role").disabled = false; // Enable
            document.getElementById("saveButton").style.display = "inline";
            document.getElementById("editButton").style.display = "none";
        }

        function disableEdit() {
            document.getElementById("userForm").querySelectorAll("input").forEach(input => {
                console.log(input); // Log input elements
                input.readOnly = true; // Set to read-only
            });
            console.log("test");
        }
    </script>
</head>
<body>
<h1>My Page</h1>
<form id="userForm" action="/mypage" method="post" th:object="${user}">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" th:field="*{name}" readonly><br>

    <label for="role">Role:</label>
    <select id="role" name="role" th:field="*{role}" required>
        <option value="Select">Select</option>
        <option value="Freshman">Freshman</option>
        <option value="Senior_Student">Senior Student</option>
        <option value="Professor">Professor</option>
        <option value="Student_Council">Student Council</option>
    </select><br>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" th:field="*{email}" readonly><br>

    <!-- Buttons -->
    <button type="button" id="editButton" onclick="enableEdit()">Edit</button>
    <button type="submit" id="saveButton" style="display: none;" onclick="disableEdit()">Save</button>
    <button type="button" onclick="history.back()">Back</button>
</form>
</body>
</html>