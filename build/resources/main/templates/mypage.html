<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Page</title>
    <script>
        // Edit mode toggle
        function enableEdit() {
            document.getElementById("userForm").querySelectorAll("input").forEach(input => input.readOnly = false);
            document.getElementById("role").disabled = false; // 활성화
            document.getElementById("saveButton").style.display = "inline";
            document.getElementById("editButton").style.display = "none";
        }

        function disableEdit() {
            document.getElementById("userForm").querySelectorAll("input").forEach(input => input.readOnly = true);
            document.getElementById("role").disabled = true; // 저장 후 비활성화
        }
    </script>

</head>
<body>
<h1>My Page</h1>
<form id="userForm" action="/mypage" method="post">
    <label for="name">이름:</label>
    <input type="text" id="name" name="name" th:value="${user.name}" readonly><br>

    <label for="role">역할:</label>
    <select id="role" name="role" required readonly>
        <option value="Freshman" th:selected="${user.role == 'Freshman'}">Freshman</option>
        <option value="Senior Student" th:selected="${user.role == 'Senior Student'}">Senior Student</option>
        <option value="Professor" th:selected="${user.role == 'Professor'}">Professor</option>
        <option value="Student Council" th:selected="${user.role == 'Student Council'}">Student Council</option>
    </select>

    <label for="email">이메일:</label>
    <input type="email" id="email" name="email" th:value="${user.email}" readonly><br>

    <!-- Buttons -->
    <button type="button" id="editButton" onclick="enableEdit()">수정하기</button>
    <button type="submit" id="saveButton" style="display: none;" onclick="disableEdit()">저장하기</button>
    <button type="button" onclick="history.back()">뒤로가기</button>
</form>
</body>
</html>
